{"version":3,"sources":["u3-pages/00-Header/Header.module.scss","u4-redux/app-reducer.ts","u4-redux/store.ts","serviceWorker.ts","u3-pages/00-Header/Header.tsx","u3-pages/00-Header/HeaderContainer.tsx","u7-hoc/withSuspense.tsx","u3-pages/01-Main/Main.tsx","u3-pages/404/Page404.tsx","u6-app/App.tsx","index.tsx","u5-api/auth-api.ts","u5-api/security-api.ts","u4-redux/auth-reducer.ts","u2-components/Preloader/Preloader.tsx","u5-api/profile-api.ts","u4-redux/profile-reducer.ts","u1-assets/images/header/question-mark-128.png","u6-app/App.module.scss","u5-api/api.ts","u3-pages/01-Main/Main.module.scss","u4-redux/dialogs-reducer.ts","u5-api/users-api.ts","utils/objectHelpers.ts","u4-redux/users-reducer.ts","u1-assets/images/logo.svg","u1-assets/images/header/exit-100.png","u1-assets/images/app/preloader.gif","u2-components/Preloader/Preloader.module.scss"],"names":["module","exports","initializeState","initialized","actions","type","rootReducer","combineReducers","profileState","profileReducer","dialogsState","dialogsReducer","usersState","usersReducer","authState","authReducer","app","state","action","form","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Boolean","location","hostname","match","Header","props","smallProfileImg","useSelector","profile","photos","small","className","s","topBar","logoWrapper","logoLink","href","logoImg","src","alt","logoName","topArea","pageNameWrapper","pageName","useLocation","pathname","substring","userImg","isAuth","isAuthState","login","undefinedUserImg","to","exitIconWrapper","exit","onClick","logout","exitIcon","HeaderContainer","this","React","Component","connect","getAuthUserData","withSuspense","WrappedComponent","restProps","Suspense","fallback","Preloader","Main","dispatch","useDispatch","largeProfileImg","large","userName","fullName","isOwner","userId","id","mainBlockWrapper","gap","row","userProfile","mainBg","profileAuthor","profileImgBlock","mainAuthorImg","imageUpload","inputLabel","photoLoad","onChange","e","target","files","length","savePhoto","profileNavSection","navTabs","shortAuthorInfo","country","navLinks","active","activeClassName","Page404","Login","lazy","ProfileContainer","DialogsContainer","UsersContainer","App","catchAllUnhandledErrors","alert","initializeApp","container","content","exact","path","render","withRouter","promise","Promise","all","then","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message","authAPI","axiosInstance","get","res","data","email","password","rememberMe","captcha","post","delete","securityAPI","captchaUrl","payload","a","meData","resultCode","ResultCodes","Success","ResultCodeCaptcha","CaptchaIsRequired","getCaptchaUrl","messages","stopSubmit","_error","url","preloader","profileAPI","status","put","photoFile","formData","FormData","append","headers","initialState","posts","likeCount","postNewMessageText","userStatus","addPost","setUserProfileData","getUserStatus","setOwnProfileStatus","savePhotoSuccess","getUserProfileData","getStatusFromUser","updateOwnProfileStatus","file","saveProfileData","getState","Error","reject","axios","create","withCredentials","baseURL","dialogs","name","dialogNewMessageText","addMessage","usersAPI","getUsers","currentPage","pageSize","term","friend","follow","unfollow","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","users","totalUsersCount","isFetching","followingInProgress","filter","userID","followed","totalCount","requestUsers","requestPage","_followUnfollowFlow","apiMethod","actionCreator","bind"],"mappings":"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","file":"static/js/main.5e40c071.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"topBar\":\"Header_topBar__1Az66\",\"logoWrapper\":\"Header_logoWrapper__3_JiU\",\"logoLink\":\"Header_logoLink__104dH\",\"logoName\":\"Header_logoName__D55wE\",\"logoImg\":\"Header_logoImg__1OVyx\",\"topArea\":\"Header_topArea__1GHML\",\"pageNameWrapper\":\"Header_pageNameWrapper__3hhiO\",\"pageName\":\"Header_pageName__1wD9q\",\"userImg\":\"Header_userImg__1O08g\",\"isAuthState\":\"Header_isAuthState__yVN4-\",\"login\":\"Header_login__2O5vq\",\"exitIconWrapper\":\"Header_exitIconWrapper__227hT\",\"exit\":\"Header_exit__28vdY\",\"exitIcon\":\"Header_exitIcon__sJG7o\"};","import {ThunkAction, ThunkDispatch} from 'redux-thunk'\r\nimport {AppStateType, InferActionsTypes} from './store'\r\nimport {getAuthUserData} from './auth-reducer'\r\n\r\nlet initializeState = {\r\n   initialized: false\r\n}\r\n\r\nexport type AppInitStateType = typeof initializeState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\n\r\nexport const appReducer = (state: AppInitStateType = initializeState, action: ActionsType): AppInitStateType => {\r\n   switch (action.type) {\r\n      case 'SN/APP/INITIALIZED_SUCCESS':\r\n         return {...state, initialized: true}\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\n//Action\r\nexport const actions = {\r\n   initializedSuccess:() => ({\r\n      type: 'SN/APP/INITIALIZED_SUCCESS',\r\n   } as const)\r\n}\r\n\r\n//Thunk\r\nexport const initializeApp = (): ThunkType =>\r\n    (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       let promise = dispatch(getAuthUserData())\r\n       Promise.all([promise])\r\n           .then(() => {\r\n              dispatch(actions.initializedSuccess)\r\n           })\r\n    }\r\n\r\n//Type\r\ntype ThunkType = ThunkAction<void, AppStateType, unknown, ActionsType>\r\n\r\n\r\n\r\n","import {Action, applyMiddleware, combineReducers, compose, createStore} from 'redux'\r\nimport {profileReducer} from './profile-reducer'\r\nimport {dialogsReducer} from './dialogs-reducer'\r\nimport {usersReducer} from './users-reducer'\r\nimport {authReducer} from './auth-reducer'\r\nimport thunkMiddleware, {ThunkAction} from 'redux-thunk'\r\nimport {reducer as formReducer} from 'redux-form'\r\nimport {appReducer} from './app-reducer'\r\n\r\nconst rootReducer = combineReducers({\r\n   profileState: profileReducer,\r\n   dialogsState: dialogsReducer,\r\n   usersState: usersReducer,\r\n   authState: authReducer,\r\n   app: appReducer,\r\n   form: formReducer,\r\n})\r\n\r\nexport type AppStateType = ReturnType<typeof rootReducer>\r\n\r\ntype PropertiesTypes<T> = T extends { [key: string]: infer U } ? U : never\r\n\r\n//AC get type of Action which can be object with 'key:string' ang function with (...args) which return something\r\n//example! followSuccess: (userID: number) => ({type: 'USERS/FOLLOW', userID} as const)\r\nexport type InferActionsTypes<T extends { [key: string]: (...args: any) => any }> = ReturnType<PropertiesTypes<T>>\r\n\r\n//Thunk...\r\nexport type BaseThunkType<A extends Action,R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\r\n\r\n//@ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\nexport let store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)))\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the u6-app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve u1-assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web u6-app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different u6-app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport s from './Header.module.scss'\r\nimport {NavLink, useLocation} from 'react-router-dom'\r\n\r\nimport logoImg from './../../u1-assets/images/logo.svg'\r\nimport undefinedUserImg from './../../u1-assets/images/header/question-mark-128.png'\r\nimport exit from './../../u1-assets/images/header/exit-100.png'\r\nimport {useSelector} from 'react-redux'\r\nimport {AppStateType} from '../../u4-redux/store'\r\n\r\ntype HeaderPropsType = {\r\n   isAuth: boolean\r\n   login: string | null\r\n   logout: () => void\r\n}\r\n\r\nexport const Header: React.FC<HeaderPropsType> = (props) => {\r\n\r\n   //get current url, rerender too much!!!\r\n   const HeaderView = () => {\r\n      return useLocation().pathname.substring(1)\r\n   }\r\n\r\n   const smallProfileImg = useSelector<AppStateType, string | null | undefined>(state => state.profileState.profile?.photos.small)\r\n\r\n   return (\r\n       <div className={s.topBar}>\r\n          <div className={s.logoWrapper}>\r\n             <a className={s.logoLink} href=\"#\">\r\n                <img className={s.logoImg} src={logoImg} alt=\"logo\"/>\r\n                <h4 className={s.logoName}>SOCIAL LOGO</h4>\r\n             </a>\r\n          </div>\r\n          <div className={s.topArea}>\r\n             <div className={s.pageNameWrapper}>\r\n                <span className={s.pageName}>\r\n                   {HeaderView()}\r\n                </span>\r\n             </div>\r\n             <div className={s.userImg}>\r\n                {\r\n                   props.isAuth\r\n                       ? <>\r\n                          <h5 className={s.isAuthState}>{props.login}</h5>\r\n                          <img src={smallProfileImg ? smallProfileImg : undefinedUserImg} alt=\"userPhoto\"/>\r\n                       </>\r\n                       : <NavLink to={'/login'} className={s.login}>LOGIN</NavLink>\r\n                }\r\n             </div>\r\n             <span className={s.exitIconWrapper}>\r\n                {\r\n                   props.isAuth\r\n                   && <a className={s.exit} href=\"#\" onClick={props.logout}>\r\n                      <img className={s.exitIcon} src={exit} alt=\"settings\"/>\r\n                   </a>\r\n                }\r\n             </span>\r\n          </div>\r\n       </div>\r\n   )\r\n}\r\n","import React from 'react'\r\nimport {Header} from './Header'\r\nimport {AppStateType} from '../../u4-redux/store'\r\nimport {connect} from 'react-redux'\r\nimport {getAuthUserData, logout} from '../../u4-redux/auth-reducer'\r\n\r\ntype OwnPropsType = MapStateType & MapDispatchType\r\n\r\nclass HeaderContainer extends React.Component<OwnPropsType> {\r\n   render() {\r\n      return <Header login={this.props.login}\r\n                     isAuth={this.props.isAuth}\r\n                     logout={this.props.logout}\r\n      />\r\n   }\r\n}\r\n\r\ntype MapStateType = {\r\n   isAuth: boolean\r\n   login: string | null\r\n}\r\n\r\ntype MapDispatchType = {\r\n   getAuthUserData: () => void\r\n   logout: () => void\r\n}\r\n\r\nconst mapState = (state: AppStateType): MapStateType => ({\r\n   isAuth: state.authState.isAuth,\r\n   login: state.authState.login,\r\n})\r\n\r\nexport default connect<MapStateType, MapDispatchType, {}, AppStateType>(\r\n    mapState,\r\n    {getAuthUserData, logout}\r\n)(HeaderContainer)\r\n","import React from 'react'\r\nimport {Preloader} from '../u2-components/Preloader/Preloader'\r\n\r\nexport function withSuspense<WCP>(WrappedComponent: React.ComponentType<WCP>) {\r\n   return (props: any) => {\r\n      let {...restProps} = props\r\n      return (\r\n          <React.Suspense fallback={<Preloader/>}>\r\n             <WrappedComponent {...restProps as WCP}/>\r\n          </React.Suspense>\r\n      )\r\n   }\r\n}\r\n","import React from 'react'\r\n\r\nimport s from './Main.module.scss'\r\nimport undefinedUserImg from './../../u1-assets/images/header/question-mark-128.png'\r\nimport {NavLink} from 'react-router-dom'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {AppStateType} from '../../u4-redux/store'\r\nimport {savePhoto} from '../../u4-redux/profile-reducer'\r\n\r\nexport const Main = () => {\r\n\r\n   const dispatch = useDispatch()\r\n\r\n   const mainPhotoSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      if (e.target.files !== null && e.target.files.length) {\r\n         dispatch(savePhoto(e.target.files[0]))\r\n      }\r\n   }\r\n\r\n   const largeProfileImg = useSelector<AppStateType, string | null | undefined>(state => state.profileState.profile?.photos.large)\r\n\r\n   const userName = useSelector<AppStateType, string | null | undefined>(state => state.profileState.profile?.fullName)\r\n\r\n   //get id for editPhoto, show or hide input file\r\n   const profileId = useSelector<AppStateType, number | any>(state => state.profileState.profile?.userId)\r\n   const authId = useSelector<AppStateType, number | any>(state => state.authState.id)\r\n   //edit mode = isOwner\r\n   const isOwner = profileId === authId ? true : false //compare id from profile and auth\r\n\r\n   return (\r\n       <div className={s.mainBlockWrapper}>\r\n          <div className={s.gap}>\r\n             <div className={s.row}>\r\n                <div className={s.userProfile}>\r\n                   <div className={s.mainBg}>\r\n                      <div className={s.profileAuthor}>\r\n                         <div className={s.profileImgBlock}>\r\n                            <img className={s.mainAuthorImg} src={largeProfileImg ? largeProfileImg : undefinedUserImg}\r\n                                 alt=\"author\"/>\r\n                            {\r\n                               isOwner &&\r\n                               <div className={s.imageUpload}>\r\n                                  <label className={s.inputLabel}>\r\n                                     <input className={s.photoLoad} type=\"file\" onChange={mainPhotoSelect}/>\r\n                                  </label>\r\n                               </div>\r\n                            }\r\n                         </div>\r\n                      </div>\r\n                   </div>\r\n                   <div className={s.profileNavSection}>\r\n                      <div className={s.navTabs}>\r\n                         <div className={s.shortAuthorInfo}>\r\n                            <div className={s.userName}>{userName}</div>\r\n                            <div className={s.country}>Minsk, BY</div>\r\n                         </div>\r\n                         <ul className={s.navLinks}>\r\n                            <li className={s.active}>\r\n                               <NavLink to=\"/profile\" activeClassName={s.active}>About</NavLink>\r\n                            </li>\r\n                            <li>\r\n                               <NavLink to=\"/followers\" activeClassName={s.active}>Followers</NavLink>\r\n                            </li>\r\n                            <li>\r\n                               <NavLink to=\"/follow\" activeClassName={s.active}>Follow</NavLink>\r\n                            </li>\r\n                            <li>\r\n                               <NavLink to=\"/dialogs\" activeClassName={s.active}>Dialogs</NavLink>\r\n                            </li>\r\n                            <li>\r\n                               <NavLink to=\"/users\" activeClassName={s.active}>Users</NavLink>\r\n                            </li>\r\n                         </ul>\r\n                      </div>\r\n                   </div>\r\n                </div>\r\n             </div>\r\n          </div>\r\n       </div>\r\n   )\r\n}","import React from 'react'\r\n\r\nexport const Page404: React.FC = () => {\r\n\r\n\r\n   return (\r\n       <div>\r\n          <p>404 NOT FOUND</p>\r\n          this page is under construction\r\n       </div>\r\n   )\r\n}","import React, {ComponentType} from 'react'\r\nimport s from './App.module.scss'\r\nimport HeaderContainer from '../u3-pages/00-Header/HeaderContainer'\r\nimport {Route, withRouter, Switch, Redirect} from 'react-router-dom'\r\nimport {AppStateType} from '../u4-redux/store'\r\nimport {connect} from 'react-redux'\r\nimport {initializeApp} from '../u4-redux/app-reducer'\r\nimport {compose} from 'redux'\r\nimport {Preloader} from '../u2-components/Preloader/Preloader'\r\nimport {withSuspense} from '../u7-hoc/withSuspense'\r\nimport {Main} from '../u3-pages/01-Main/Main'\r\nimport {Page404} from '../u3-pages/404/Page404'\r\n\r\ntype PropsType = MapStateType & MapDispatchToProps\r\n\r\nconst Login = React.lazy(() => import('../u3-pages/Login/Login'))\r\nconst ProfileContainer = React.lazy(() => import('../u3-pages/Profile/ProfileContainer'))\r\nconst DialogsContainer = React.lazy(() => import('../u3-pages/Dialogs/DialogsContainer'))\r\nconst UsersContainer = React.lazy(() => import('../u3-pages/Users/UsersContainer'))\r\n\r\nclass App extends React.Component<PropsType> {\r\n\r\n   catchAllUnhandledErrors = (e: PromiseRejectionEvent) => {\r\n      alert('Some error occurred')\r\n   }\r\n\r\n   componentDidMount() {\r\n      this.props.initializeApp()\r\n      // window.addEventListener('unhandledrejection', this.catchAllUnhandledErrors)\r\n   }\r\n\r\n   render() {\r\n\r\n      if (this.props.initialized) {\r\n         return <Preloader/>\r\n      }\r\n\r\n      return (\r\n          <div className={s.app}>\r\n             <HeaderContainer/>\r\n             <div className={s.container}>\r\n                <Main/>\r\n                <div className={s.content}>\r\n                   <Switch>\r\n                      <Route exact path=\"/\" render={() => <Redirect to='/profile'/>}/>\r\n                      <Route path=\"/profile/:userid?\" render={withSuspense(ProfileContainer)}/>\r\n                      <Route path=\"/dialogs\" render={withSuspense(DialogsContainer)}/>\r\n                      <Route path=\"/users\" render={withSuspense(UsersContainer)}/>\r\n                      <Route path=\"/login\" render={withSuspense(Login)}/>\r\n                      <Route render={withSuspense(Page404)}/>\r\n                   </Switch>\r\n                </div>\r\n             </div>\r\n          </div>\r\n      )\r\n   }\r\n}\r\n\r\ntype MapDispatchToProps = {\r\n   initializeApp: () => void\r\n}\r\n\r\ntype MapStateType = {\r\n   initialized: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateType => ({\r\n   initialized: state.app.initialized\r\n})\r\n\r\nexport default compose<ComponentType>(\r\n    withRouter,\r\n    connect<MapStateType, MapDispatchToProps, {}, AppStateType>(mapStateToProps, {initializeApp}),\r\n)(App)\r\n","import {store} from './u4-redux/store';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {HashRouter} from 'react-router-dom';\r\nimport {Provider} from 'react-redux';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './u6-app/App';\r\nimport React from 'react';\r\nimport './index.scss';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <Provider store={store}>\r\n        <App/>\r\n      </Provider>\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your u6-app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();","import {axiosInstance, APIResponseType, ResultCodeCaptcha, ResultCodes} from './api'\r\n\r\ntype MeResponseDataType = {\r\n      id: number,\r\n      email: string,\r\n      login: string\r\n}\r\n\r\ntype LoginResponseDataType = {\r\n   userId: number\r\n}\r\n\r\nexport const authAPI = {\r\n   me() {\r\n      return axiosInstance.get<APIResponseType<MeResponseDataType>>(`auth/me`)\r\n          .then(res => res.data)\r\n   },\r\n   login(email: string, password: string, rememberMe: boolean = false, captcha: null | string = null) {\r\n      return axiosInstance.post<APIResponseType<LoginResponseDataType, ResultCodeCaptcha | ResultCodes>>(`auth/login`, {email, password, rememberMe, captcha})\r\n          .then(res => res.data)\r\n   },\r\n   logout() {\r\n      return axiosInstance.delete(`auth/login`,)\r\n          .then(res => res.data)\r\n   },\r\n}","import {axiosInstance} from './api'\r\n\r\ntype GetCaptchaUrlResponseType = {\r\n   url: string\r\n}\r\n\r\nexport const securityAPI = {\r\n   getCaptchaUrl() {\r\n      return axiosInstance.get<GetCaptchaUrlResponseType>(`security/get-captcha-url`)\r\n          .then(res => res.data)\r\n   },\r\n}","import {ThunkDispatch} from 'redux-thunk'\r\nimport {AppStateType, BaseThunkType, InferActionsTypes} from './store'\r\nimport {authAPI} from '../u5-api/auth-api'\r\nimport {FormAction, stopSubmit} from 'redux-form'\r\nimport {securityAPI} from '../u5-api/security-api'\r\nimport {ResultCodeCaptcha, ResultCodes} from '../u5-api/api'\r\n\r\nlet initializeState = {\r\n   id: null as (number | null),\r\n   email: null as string | null,\r\n   login: null as string | null,\r\n   isAuth: false,\r\n   captchaUrl: null as string | null\r\n}\r\nexport type AuthInitStateType = typeof initializeState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n\r\nexport const authReducer = (state: AuthInitStateType = initializeState, action: ActionsType): AuthInitStateType => {\r\n   switch (action.type) {\r\n      case 'SN/AUTH/SET-USER-DATA':\r\n      case 'SN/AUTH/GET-CAPTCHA-URL':\r\n         return {...state, ...action.payload}\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\n//Action\r\nexport const actions = {\r\n   setUserData: (id: number | null, email: string | null, login: string | null, isAuth: boolean) => ({\r\n      type: 'SN/AUTH/SET-USER-DATA',\r\n      payload: {id, email, login, isAuth},\r\n   } as const),\r\n   getCaptchaUrlSuccess: (captchaUrl: string) => ({\r\n      type: 'SN/AUTH/GET-CAPTCHA-URL',\r\n      payload: {captchaUrl},\r\n   } as const)\r\n}\r\n\r\n//Thunk\r\nexport const getAuthUserData = (): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const meData = await authAPI.me()\r\n       if (meData.resultCode === ResultCodes.Success) {\r\n          let {id, email, login} = meData.data\r\n          dispatch(actions.setUserData(id, email, login, true))\r\n       }\r\n    }\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string | null = null): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType | FormAction>) => {\r\n       const data = await authAPI.login(email, password, rememberMe, captcha)\r\n       if (data.resultCode === ResultCodes.Success) {\r\n          dispatch(getAuthUserData())\r\n       } else {\r\n          //captcha = result code 10\r\n          if (data.resultCode === ResultCodeCaptcha.CaptchaIsRequired) {\r\n             dispatch(getCaptchaUrl())\r\n          }\r\n          //incorrect form value\r\n          let messages = data.messages.length > 0 ? data.messages[0] : 'some error'\r\n          dispatch(stopSubmit('login', {_error: messages}))\r\n       }\r\n    }\r\n\r\nexport const getCaptchaUrl = (): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const data = await securityAPI.getCaptchaUrl()\r\n       const captchaUrl: string = data.url\r\n       dispatch(actions.getCaptchaUrlSuccess(captchaUrl))\r\n    }\r\n\r\nexport const logout = (): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const response = await authAPI.logout()\r\n       if (response.resultCode === ResultCodes.Success) {\r\n          dispatch(actions.setUserData(null, null, null, false))\r\n       }\r\n    }\r\n\r\n\r\n","import React from 'react'\r\nimport preloader from '../../u1-assets/images/app/preloader.gif'\r\n\r\nimport s from './Preloader.module.scss'\r\n\r\nexport const Preloader: React.FC = () => {\r\n   return (\r\n       <div className={s.preloader}>\r\n          <img src={preloader} alt=\"preloader\"/>\r\n       </div>\r\n   )\r\n}\r\n\r\n","import {axiosInstance, APIResponseType} from './api'\r\nimport {ProfileType} from '../u4-redux/profile-reducer'\r\nimport {PhotosType} from '../u4-redux/users-reducer'\r\n\r\ntype SavePhotoResponseDataType = {\r\n   photos: PhotosType\r\n}\r\n\r\nexport const profileAPI = {\r\n   getProfile(userId: number) {\r\n      return axiosInstance.get<ProfileType>(`profile/${userId}`)\r\n          .then(res => res.data)\r\n   },\r\n\r\n   getUserStatus(userId: number) {\r\n      return axiosInstance.get<string>(`profile/status/${userId}`)\r\n          .then(res => res.data)\r\n   },\r\n\r\n   updateOwnProfileStatus(status: string) {\r\n      return axiosInstance.put<APIResponseType>(`profile/status`, {status})\r\n          .then(res => res.data)\r\n   },\r\n\r\n   savePhoto(photoFile: File) {\r\n      const formData = new FormData()\r\n      formData.append('image', photoFile)\r\n      return axiosInstance.put<APIResponseType<SavePhotoResponseDataType>>(`profile/photo`, formData, {\r\n         headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n         }\r\n      }).then(res => res.data)\r\n   },\r\n\r\n   saveProfile(profile: ProfileType) {\r\n      return axiosInstance.put<APIResponseType<ProfileType>>(`profile/`, profile)\r\n          .then(res => res.data)\r\n   },\r\n}","import {ThunkDispatch} from 'redux-thunk'\r\nimport {AppStateType, BaseThunkType, InferActionsTypes} from './store'\r\nimport {profileAPI} from '../u5-api/profile-api'\r\nimport {FormAction, stopSubmit} from 'redux-form'\r\nimport {ResultCodes} from '../u5-api/api'\r\n\r\nlet initialState = {\r\n   posts: [\r\n      {id: 1, message: 'Hello I am props.', likeCount: 21},\r\n      {id: 2, message: 'I am very handsome props', likeCount: 10},\r\n      {id: 3, message: 'I go out from my post u3-pages', likeCount: 5},\r\n   ] as Array<PostType>,\r\n   profile: null as ProfileType | null,\r\n   status: ''\r\n}\r\n\r\nexport type ProfileInitialStateType = typeof initialState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n\r\nexport const profileReducer = (state: ProfileInitialStateType = initialState,\r\n                               action: ActionsType): ProfileInitialStateType => {\r\n   switch (action.type) {\r\n      case 'SN/PROFILE/ADD-POST':\r\n         return {\r\n            ...state,\r\n            posts: [{id: 4, message: action.postNewMessageText, likeCount: 0}, ...state.posts],\r\n         }\r\n      case 'SN/PROFILE/SET-USER-PROFILE':\r\n         return {...state, profile: action.profile}\r\n      case 'SN/PROFILE/GET-USER-STATUS':\r\n         return {...state, status: action.userStatus}\r\n      case 'SN/PROFILE/UPDATE-PROFILE-STATUS':\r\n         return {...state, status: action.status}\r\n      case 'SN/PROFILE/SAVE-PHOTO-SUCCESS':\r\n         return {...state, profile: {...state.profile, photos: action.photos} as ProfileType}\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\n//Action\r\nexport const actions = {\r\n   addPost:(postNewMessageText: string) =>\r\n       ({type: 'SN/PROFILE/ADD-POST', postNewMessageText} as const),\r\n   setUserProfileData:(profile: ProfileType) =>\r\n       ({type: 'SN/PROFILE/SET-USER-PROFILE', profile} as const),\r\n   getUserStatus:(userStatus: string) =>\r\n       ({type: 'SN/PROFILE/GET-USER-STATUS', userStatus} as const),\r\n   setOwnProfileStatus:(status: string) =>\r\n       ({type: 'SN/PROFILE/UPDATE-PROFILE-STATUS', status} as const),\r\n   savePhotoSuccess:(photos: PhotosType) => ({type: 'SN/PROFILE/SAVE-PHOTO-SUCCESS', photos} as const)\r\n}\r\n\r\n//Thunk\r\nexport const getUserProfileData = (userId: number): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const data = await profileAPI.getProfile(userId)\r\n       dispatch(actions.setUserProfileData(data))\r\n    }\r\n\r\nexport const getStatusFromUser = (userId: number): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const data = await profileAPI.getUserStatus(userId)\r\n       dispatch(actions.getUserStatus(data))\r\n    }\r\n\r\nexport const updateOwnProfileStatus = (status: string): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const data = await profileAPI.updateOwnProfileStatus(status)\r\n       if (data.resultCode === ResultCodes.Success) {\r\n          dispatch(actions.setOwnProfileStatus(status))\r\n       }\r\n    }\r\n\r\nexport const savePhoto = (file: File): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n       const data = await profileAPI.savePhoto(file)\r\n       if (data.resultCode === ResultCodes.Success) {\r\n          dispatch(actions.savePhotoSuccess(data.data.photos))\r\n       }\r\n    }\r\n\r\nexport const saveProfileData = (profile: ProfileType): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType | FormAction>, getState) => {\r\n       const userId = getState().authState.id\r\n       const data = await profileAPI.saveProfile(profile)\r\n       if (data.resultCode === ResultCodes.Success) {\r\n          if(userId !== null) {\r\n             dispatch(getUserProfileData(userId))\r\n          } else {\r\n             throw new Error(`userId can't be null`)\r\n          }\r\n       } else {\r\n          //need changing error for different fields\r\n          // dispatch(stopSubmit('edit-profile', {'contacts': {'facebook': messages}}))\r\n          const messages = data.messages.length > 0 ? data.messages[0] : 'some error'\r\n          dispatch(stopSubmit('profile-data', {_error: messages}))\r\n          return Promise.reject(messages)\r\n       }\r\n    }\r\n\r\n//Type\r\n\r\nexport type PostType = {\r\n   id: number\r\n   message: string\r\n   likeCount: number\r\n}\r\nexport type ContactType = {\r\n   github: string\r\n   vk: string\r\n   facebook: string\r\n   instagram: string\r\n   twitter: string\r\n   website: string\r\n   youtube: string\r\n   mainLink: string\r\n}\r\n\r\nexport type PhotosType = {\r\n   small: string | null\r\n   large: string | null\r\n}\r\n\r\nexport type ProfileType = {\r\n   userId: number\r\n   lookingForAJob: boolean\r\n   lookingForAJobDescription: string\r\n   fullName: string\r\n   contacts: ContactType\r\n   aboutMe: string\r\n   photos: PhotosType\r\n}\r\n\r\n\r\n","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__2qEWX\",\"container\":\"App_container__2XEzo\",\"content\":\"App_content__jQUw6\"};","import axios from 'axios'\r\nimport {UsersType} from '../u4-redux/users-reducer'\r\n\r\nexport const axiosInstance = axios.create({\r\n   withCredentials: true,\r\n   baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n   headers: {\r\n      'API-KEY': 'ec9092bf-d7c1-484e-b4e6-892ed49a92ea'\r\n   },\r\n})\r\n\r\nexport type APIResponseType<D = {}, RC = ResultCodes> = {\r\n   data: D\r\n   messages: string[]\r\n   resultCode: RC\r\n}\r\n\r\nexport enum ResultCodes {\r\n   Success = 0,\r\n   Error = 1,\r\n}\r\n\r\nexport enum ResultCodeCaptcha {\r\n   CaptchaIsRequired = 10\r\n}\r\n\r\nexport type GetItemsType = {\r\n   items: UsersType[]\r\n   totalCount: number\r\n   error: string | null\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainBlockWrapper\":\"Main_mainBlockWrapper__2YPAa\",\"row\":\"Main_row__kk5B1\",\"userProfile\":\"Main_userProfile__SUKvt\",\"mainBg\":\"Main_mainBg__6PTva\",\"profileAuthor\":\"Main_profileAuthor__2XflI\",\"profileImgBlock\":\"Main_profileImgBlock__11ArI\",\"mainAuthorImg\":\"Main_mainAuthorImg__1k2Xa\",\"imageUpload\":\"Main_imageUpload__VZUmE\",\"inputLabel\":\"Main_inputLabel__2Y6um\",\"photoLoad\":\"Main_photoLoad__3O7R4\",\"profileNavSection\":\"Main_profileNavSection__1CfGu\",\"navTabs\":\"Main_navTabs__3xeHN\",\"shortAuthorInfo\":\"Main_shortAuthorInfo__IS2F8\",\"userName\":\"Main_userName__3nmlm\",\"country\":\"Main_country__2b3Ky\",\"navLinks\":\"Main_navLinks__3Y_PO\",\"active\":\"Main_active__1u-4j\"};","import {InferActionsTypes} from './store'\r\n\r\nlet initializeState = {\r\n   dialogs: [\r\n      {id: 1, name: 'Stanislav Ivanov'},\r\n      {id: 2, name: 'Egor Ivanov'},\r\n      {id: 3, name: 'Sergey Ivanov'},\r\n   ] as Array<DialogType>,\r\n   messages: [\r\n      {id: 1, message: 'Detract yet delight written farther'},\r\n      {id: 2, message: 'An stairs as be lovers'},\r\n      {id: 3, message: 'Unpleasant in in insensible favourable'},\r\n   ] as Array<MessageType>,\r\n}\r\n\r\nexport type DialogInitStateType = typeof initializeState\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\n\r\nexport const dialogsReducer = (state: DialogInitStateType = initializeState,\r\n                               action: ActionsTypes): DialogInitStateType => {\r\n   switch (action.type) {\r\n      case 'SN/DIALOGS/ADD-NEW-MESSAGE':\r\n         return {\r\n            ...state,\r\n            messages: [...state.messages, {id: 5, message: action.dialogNewMessageText}]\r\n         }\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\n//Action\r\nexport const actions = {\r\n   addMessage: (dialogNewMessageText: string) =>\r\n       ({type: 'SN/DIALOGS/ADD-NEW-MESSAGE', dialogNewMessageText} as const)\r\n}\r\n\r\n//Types\r\n\r\nexport type DialogType = {\r\n   id: number\r\n   name: string\r\n}\r\nexport type MessageType = {\r\n   id: number\r\n   message: string\r\n}\r\n\r\n","import {axiosInstance, GetItemsType, APIResponseType} from './api'\r\n\r\nexport const usersAPI = {\r\n   getUsers(currentPage: number, pageSize: number, term: string = '', friend: null | boolean = null) {\r\n      return axiosInstance.get<GetItemsType>\r\n      (`users?page=${currentPage}&count=${pageSize}&term=${term}`+(friend === null ? '':`&friend=${friend}`))\r\n          .then(res => res.data)\r\n   },\r\n\r\n   follow(userId: number) {\r\n      return axiosInstance.post<APIResponseType>(`follow/${userId}`, {})\r\n          .then(res => res.data)\r\n   },\r\n\r\n   unfollow(userId: number) {\r\n      return axiosInstance.delete(`follow/${userId}`)\r\n          .then(res => res.data) as Promise<APIResponseType>\r\n   },\r\n}","export const updateObjectInArray = (items: any, itemId: any, objPropName: any, newObjProps: any) => {\r\n   return items.map((u: any) => {\r\n      if (u[objPropName] === itemId) {\r\n         return {...u, ...newObjProps}\r\n      }\r\n      return u;\r\n   })\r\n}\r\n","import {AppStateType, BaseThunkType, InferActionsTypes} from './store';\r\nimport {ThunkDispatch} from 'redux-thunk';\r\nimport {usersAPI} from '../u5-api/users-api';\r\nimport {Dispatch} from 'redux';\r\nimport {APIResponseType, ResultCodes} from '../u5-api/api';\r\nimport {updateObjectInArray} from '../utils/objectHelpers';\r\n\r\nlet initializeState = {\r\n    users: [] as UsersType[],\r\n    totalUsersCount: 0,\r\n    pageSize: 5,\r\n    currentPage: 5,\r\n    isFetching: false,\r\n    followingInProgress: [] as number[], //array of users id\r\n    filter: {\r\n        term: '',\r\n        friend: null as null | boolean\r\n    }\r\n};\r\n\r\nexport type UsersInitializeStateType = typeof initializeState\r\nexport type FilterType = typeof initializeState.filter\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n\r\n\r\nexport const usersReducer = (state: UsersInitializeStateType = initializeState, action: ActionsType): UsersInitializeStateType => {\r\n    switch (action.type) {\r\n        case 'SN/USERS/FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userID, 'id', {followed: true})\r\n            };\r\n        case 'SN/USERS/UNFOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userID, 'id', {followed: false})\r\n            };\r\n        case 'SN/USERS/SET-USERS':\r\n            return {...state, users: [...action.users]};\r\n        case 'SN/USERS/SET-CURRENT-PAGE':\r\n            return {...state, currentPage: action.currentPage};\r\n        case 'SN/USERS/SET-USERS-TOTAL-COUNT':\r\n            return {...state, totalUsersCount: action.totalCount};\r\n        case 'SN/USERS/TOGGLE-IS-FETCHING':\r\n            return {...state, isFetching: action.isFetching};\r\n        case 'SN/USERS/FOLLOWING-IN-PROGRESS':\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.payload.isFetching\r\n                    ? [...state.followingInProgress, action.payload.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.payload.userId)\r\n            };\r\n        case 'SN/USERS/SET-FILTER':\r\n            return {\r\n                ...state,\r\n                filter: action.payload.filter\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n//Action\r\nexport const actions = {\r\n    followSuccess: (userID: number) => ({type: 'SN/USERS/FOLLOW', userID} as const),\r\n    unfollowSuccess: (userID: number) => ({type: 'SN/USERS/UNFOLLOW', userID} as const),\r\n    setUsers: (users: Array<UsersType>) => ({type: 'SN/USERS/SET-USERS', users} as const),\r\n    setCurrentPage: (currentPage: number) => ({\r\n        type: 'SN/USERS/SET-CURRENT-PAGE',\r\n        currentPage\r\n    } as const),\r\n    setUsersTotalCount: (totalCount: number) => ({\r\n        type: 'SN/USERS/SET-USERS-TOTAL-COUNT',\r\n        totalCount\r\n    } as const),\r\n    toggleIsFetching: (isFetching: boolean) => ({\r\n        type: 'SN/USERS/TOGGLE-IS-FETCHING', isFetching\r\n    } as const),\r\n    toggleFollowingProgress: (isFetching: boolean, userId: number) => ({\r\n        type: 'SN/USERS/FOLLOWING-IN-PROGRESS',\r\n        payload: {\r\n            isFetching,\r\n            userId\r\n        }\r\n    } as const),\r\n    setFilter: (filter: FilterType) => ({\r\n        type: 'SN/USERS/SET-FILTER',\r\n        payload: {filter}\r\n    } as const)\r\n};\r\n\r\n//Thunk\r\nexport const requestUsers = (requestPage: number, pageSize: number, filter: FilterType): ThunkType =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n        dispatch(actions.toggleIsFetching(true));\r\n        dispatch(actions.setCurrentPage(requestPage));\r\n        dispatch(actions.setFilter(filter));\r\ndebugger\r\n        const data = await usersAPI.getUsers(requestPage, pageSize, filter.term, filter.friend);\r\n        dispatch(actions.toggleIsFetching(false));\r\n        dispatch(actions.setUsers(data.items));\r\n        debugger\r\n        dispatch(actions.setUsersTotalCount(data.totalCount));\r\n    };\r\n\r\nconst _followUnfollowFlow = async (dispatch: Dispatch<ActionsType>,\r\n                                   userId: number,\r\n                                   apiMethod: (userId: number) => Promise<APIResponseType>,\r\n                                   actionCreator: (userId: number) => ActionsType) => {\r\n    dispatch(actions.toggleFollowingProgress(true, userId));\r\n    let response = await apiMethod(userId);\r\n\r\n    if (response.resultCode === ResultCodes.Success) {\r\n        dispatch(actionCreator(userId));\r\n    }\r\n    dispatch(actions.toggleFollowingProgress(false, userId));\r\n};\r\n\r\nexport const follow = (id: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        await _followUnfollowFlow(dispatch, id, usersAPI.follow.bind(usersAPI), actions.followSuccess);\r\n    };\r\n};\r\n\r\nexport const unfollow = (id: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        await _followUnfollowFlow(dispatch, id, usersAPI.unfollow.bind(usersAPI), actions.unfollowSuccess);\r\n    };\r\n};\r\n\r\n//Type\r\n\r\nexport type PhotosType = {\r\n    small: string | null\r\n    large: string | null\r\n}\r\n\r\nexport type UsersType = {\r\n    id: number\r\n    name: string\r\n    status: string\r\n    photos: PhotosType\r\n    followed: boolean\r\n}\r\n\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.56310f43.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAAHUUlEQVR4nO2dW6gVVRjHv6WW0b1MyMxIMimiMIoSUgM1Sg2LMM3ooYfKTOohukBFCGJFSmYmhF0eIqN6iETCh9KjmSFIT6GWmZKXY+Rdj2Ydj78e5hzdezmz91oz39z2mR+ch7Nn5lv/9f33zJp1mdkiFRUVFRUVFRUVvRhgIrCd8rMTmBBVT5NlUpMA7BKRwXnrUGKnMeaasA19slaSgFN5C1BkSNSGMhkyQ0S25y0ibUpzySo7ALX/G2NCc1+mM6RXUBlSMCpDCkapDQHuAT4EfgU6uv82A0uA8Xnr6zUAw4E1Dp2w1cD1eesVCRr1WvLWowYwBjjg0TPeD4wugO7WM6T7zPAxo9aUYTlrb0lDVsUwo4fVOWtvLUMIGvCkjMtRv5MhZbrLmqYQY6pCjFQpkyGjFGKMUYiRKmUy5CqFGLGH74GHgX3AbuBBBS3lBjii0IYciVm2AfbWxOkEvC6hrdiGtCvE2BXnIGMMUj8f009EPvM1xYUyGfJDzjFmisjJmv9TM6UUAOMVLlljE2qY1n25qsXp8uV6ySoVwMoEZrQpaZgSYspJ4LEmx7WkIUOpb1xdUR06iWNKSxoiIgKM7k6wK/sAjT6MrcPr8tWyhoiIAMNwG9daCVzXJJb2eq9OQvoproaUepEDwdjUVBEZLWeW1uwQkbUi8pUxZpVDjDTWe/1ljBlkleO0yCE1Q4C7RORlERkpIgPjhBCRQyKyT0S2iMgGEWkTkXXGmC5FnTtF5GqteN3sMcbUjSy4GpIKwNMEjVwatANvAyrfamACsE1RXyfwQEg5dWhod63gHcB/ihWM4l9gAXBxZpWrr2fxG3WgL/Bz2k5Y7CZhhy9GPb07iLborIQ+k37+QzkJvJhRHWP11m3BWQgdSLz5bk3mA2neqJRn6AT4OP18O7GQFEwBHiCmGd3H16Gtzy5sJNCVeqrdUTeF4EGbWrzmRGyBmtrsgvJoyF1QNYXgdruH1CaoEkN+DbkLaqYQXLJ2EPRZzupnOBxfh4amsEIGEAzeubIsJMYlwLHkuY/kA1Js6F2xRaVViE9DfhwYGhJjhlLiG5G7KbagNAq4GTjlkZRXI+L8pJT0ZqRy9+WKLSaNAhZ4JGMLcF5IjOH4mZqU3M4UW0jUfkkWOdzmse8sY8yJkM8fl2ynAGaISKMvwAFgGXBrhpp0ANY5fiu/jDi+L2ff2xeFLuAV5XzVEbVfkjNkvcM+R0Xk+Yht4yT5PMRGEXkvYYww+ojIXOC+FGKnAzCC5nMezzU4fqnCN3kmwarChQqxwmg64+iRrzq04tqFzCJ6yOQTIhpQgr7H8YTJOgRc2B0vLVNiLT2NqHMdWnHDChoFLAcOAoeBtcCjTY55UiFZ71ox0zDlkGKe6tCKqwLuNwRRnCLkYU70TflOsc51aMVNDDp9jxUN4muaMlGx3nVoxU0MMFchUZOalGGAeQnLmKNc7zo0Y8cG6EMwYpqErYDT7TpwP8FiuaOOsQ8D39PgBWMJ6l5IQ+5NaAZAVL+m0BTVkC8SmtEBXJZ3PeLgakjWD+wkXfS81BhzUEVJQclsYI+gk9gpIn0ThLnFGPOLkqRMsc+K3F9g1v2cXtiIrytrymqGD1lfsjYlOPZ9NRUFJmtDvol53O4Ex1ZEAVxOvNWNxwiZjy8TrndZaYsYDFxhfTYlhiHQYLikDBTFkEXA/JDP4441Tc+jHhrkbggwiGDOoxMYaW07B/gxhiF7sc64slAEQxbVlL8VuNTaPgT4O4YpH2VeGQVyNYQzZ0cty7FmEIGx+D/6doqMH9DRIG9DFp2dRwBeCtn3dU9DAH4jZJ1XkVEzBJgMtBEM7CWlE7jbit8HWBEj1uzEWcoQW3zcIG8mNCCMPcCVVjkDgD8945wAblDJVgbY4uMEmJw895GsBvpZ5d1J8GStD2sowMp2F2zhcQK0Jc97Q94KKXNWjDhPqGQsZWzRUfs1Gsu6PQVdtfS3PzDGLBaRTz3jzAc03sdYbHCfh47DQWBARLkXABs9432edX58sQVH7dfoDNmQgq4e3jDG7A/bYIw5JiJTRKTDI950yrQONw4EKzbSYDMOfQjgEc+424Dzs8hNHGyxcYPMUTCglnbgJo/yozqYUcyLVdEMsIUmCTSJYK3S4ZgmdAJ/AO9g9T8cyj4XWO9Z1ojYlU0RNUPyhmAQ0uc9ixuAJAspUqFlDBEJ3hyH3yBk5HMpedFShoiIALM9DOkArs1bcy2taIjvIOS3eWuupeUMETm9SMLnDaIP5a25h5Y0ROT0KwRdByHbsWYq86JlDRERAZ71OEsW561XpMUNEfFaSd9FAV4E0BsMuYhgGMaFJQXQ62RImX4/pA5jzFEJBiGPOex+Y8py1CitISIixpiNIvKUw6777A/Qf+d7Q/RrX2CAxU3ycdaKR2BXBj5EkkeeMgPoT/SPvXxNyLw7+b74ZkceecoUAlNeA34H/gE2AS8QMdCI/jvfnc2g1SfTKioqKioqKioKx//WmEtNgZyFyAAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/preloader.5861c44d.gif\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"Preloader_preloader__airYw\"};"],"sourceRoot":""}