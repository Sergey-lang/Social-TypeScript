(this.webpackJsonpsocial_typescript=this.webpackJsonpsocial_typescript||[]).push([[9],{238:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(62);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(o){a=!0,u=o}finally{try{r||null==c.return||c.return()}finally{if(a)throw u}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},331:function(e,t,n){"use strict";n.r(t),n.d(t,"Chat",(function(){return c})),n.d(t,"Messages",(function(){return o})),n.d(t,"Message",(function(){return i})),n.d(t,"AddMessageForm",(function(){return s}));var r=n(24),a=n(238),u=n(0),l=n.n(u),c=function(){var e=Object(u.useState)(null),t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(u.useEffect)((function(){var e,t=function(){console.log("CLOSE WS"),setTimeout(n,3e3)};function n(){var n,a,u;null===(n=e)||void 0===n||n.removeEventListener("close",t),null===(a=e)||void 0===a||a.close(),null===(u=e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"))||void 0===u||u.addEventListener("close",t),r(e)}return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),l.a.createElement("div",null,l.a.createElement(o,{wsChannel:n}),l.a.createElement(s,{wsChannel:n}))},o=function(e){var t=e.wsChannel,n=Object(u.useState)([]),c=Object(a.a)(n,2),o=c[0],s=c[1];return Object(u.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);s((function(e){return[].concat(Object(r.a)(e),Object(r.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),l.a.createElement("div",{style:{height:"400px",overflowY:"auto"}},o.map((function(e,t){return l.a.createElement(i,{message:e,key:t})})))},i=function(e){var t=e.message;return l.a.createElement("div",null,l.a.createElement("img",{src:t.photo,width:30,alt:""}),l.a.createElement("b",null,t.userName),l.a.createElement("br",null),t.message,l.a.createElement("hr",null))},s=function(e){var t=e.wsChannel,n=Object(u.useState)(""),r=Object(a.a)(n,2),c=r[0],o=r[1],i=Object(u.useState)("pending"),s=Object(a.a)(i,2),d=s[0],f=s[1];Object(u.useEffect)((function(){var e=function(){f("ready")};return null===t||void 0===t||t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]);return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("textarea",{onChange:function(e){return o(e.currentTarget.value)},value:c})),l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){c&&(null===t||void 0===t||t.send(c),o(""))},disabled:null===t||"ready"!==d},"Send")))};t.default=function(){return l.a.createElement("div",null,l.a.createElement(c,null))}}}]);
//# sourceMappingURL=9.1ce43e9e.chunk.js.map